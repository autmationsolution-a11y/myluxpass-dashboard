(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},78928,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(31422);function r(){let e=(0,a.useRouter)(),[r,n]=(0,s.useState)("Checking session..."),[l,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[u,p]=(0,s.useState)([]),[g,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)("VIP Beard Trim"),[y,v]=(0,s.useState)(30),[j,b]=(0,s.useState)(4500),S=async()=>{m(!0);let{data:t}=await i.supabase.auth.getSession(),s=t.session;if(!s)return void e.replace("/login");d(s.user.email||""),n("✅ Logged in as: "+(s.user.email||""));let{data:a,error:r}=await i.supabase.from("partners").select("id,business_name").eq("owner_id",s.user.id).single();if(r){n("❌ Error loading partner: "+r.message),c(null),p([]),m(!1);return}c(a);let{data:l,error:o}=await i.supabase.from("services").select("id,name,duration_minutes,price_cents,is_active,created_at").eq("partner_id",a.id).order("created_at",{ascending:!1});if(o){n("❌ Error loading services: "+o.message),p([]),m(!1);return}p(l||[]),m(!1)};(0,s.useEffect)(()=>{S()},[]);let f=async()=>{if(!o)return;n("Creating service...");let{error:e}=await i.supabase.from("services").insert({partner_id:o.id,name:h,duration_minutes:y,price_cents:j,is_active:!0});e?n("❌ Create failed: "+e.message):(n("✅ Service created!"),await S())},_=async()=>{await i.supabase.auth.signOut(),e.replace("/login")};return(0,t.jsxs)("main",{style:{padding:40,fontFamily:"system-ui"},children:[(0,t.jsx)("h1",{style:{marginBottom:6},children:"MyLuxPass Dashboard"}),(0,t.jsx)("p",{style:{marginTop:0,opacity:.8},children:"Connected to Supabase — showing real data from your tables."}),(0,t.jsxs)("p",{style:{marginTop:14,fontWeight:600},children:["Status: ",r]}),(0,t.jsx)("div",{style:{marginTop:14},children:(0,t.jsx)("button",{onClick:_,style:{padding:"8px 12px"},children:"Logout"})}),(0,t.jsx)("hr",{style:{margin:"24px 0"}}),(0,t.jsxs)("h2",{style:{marginBottom:8},children:["Partner: ",o?.business_name||"(no name)"]}),(0,t.jsx)("h2",{style:{marginTop:24},children:"Services"}),g?(0,t.jsx)("p",{children:"Loading..."}):0===u.length?(0,t.jsx)("p",{children:"No services found yet. Add services in Supabase table services."}):(0,t.jsx)("ul",{children:u.map(e=>(0,t.jsxs)("li",{style:{marginBottom:6},children:[(0,t.jsx)("strong",{children:e.name})," — ",e.duration_minutes," min — €",(e.price_cents/100).toFixed(2)," —"," ",e.is_active?"Active":"Inactive"]},e.id))}),(0,t.jsx)("hr",{style:{margin:"24px 0"}}),(0,t.jsx)("h2",{children:"Create New Service"}),(0,t.jsxs)("div",{style:{display:"grid",gap:10,maxWidth:420},children:[(0,t.jsx)("input",{value:h,onChange:e=>x(e.target.value),placeholder:"Service name",style:{padding:10}}),(0,t.jsx)("input",{type:"number",value:y,onChange:e=>v(parseInt(e.target.value||"0",10)),placeholder:"Duration minutes",style:{padding:10}}),(0,t.jsx)("input",{type:"number",value:j,onChange:e=>b(parseInt(e.target.value||"0",10)),placeholder:"Price cents",style:{padding:10}}),(0,t.jsx)("button",{onClick:f,style:{padding:"10px 16px"},children:"Create Service"})]})]})}e.s(["default",()=>r])}]);